### Переменные окружения

Создать файл `.env` в корне проекта со следующим содержимым

```dotenv
# Параметры подключения к postgresql. Обязательный
DATABASE_URL
# Токен. Обязательный.
BOT_TOKEN
# URL Адрес Shopstat. Обязательный.
BASE_URL_SHOPSTAT
# Секретный ключ что бы отправить в Shopstat запрос и получить пользователя. Обязательный.
SECRET_BOT_KEY
# URL REDIS
REDIS_HOST
REDIS_PORT
REDIS_PASSWORD
```

### Зависимости и окружение
```bash
# Установить npm зависимости
$ yarn install

# Создание структуры БД PostgreSQL
$ yarn migrate:dev

# Запуск приложение
$ yarn start:dev
```

Приложение запускается по адресу [http://localhost:4001][http://localhost:4001]

### Варианты запуска

```bash
# Запуск в режиме разработки
$ yarn start

# Запуск в режиме разработки с отслеживанием изменений файлов
$ yarn start:dev

# Запуск в режиме отладки
$ yarn start:debug
```

### Форматирование кода

Для форматирования кода используется `prettier`. Для того чтобы отформатировать код проекта используйте
```bash
$ yarn format
```
_Форматирование кода перед коммитом обязательно!_

### Проверка на ошибки eslint

Для проверки кода на ошибки используется `eslint`. Для запуска проверки выполните
```bash
$ yarn lint
```
_Проверка и исправление ошибок перед коммитом обязательно!_

## Работа с БД PostgreSQL через Prisma

### Применения новых изменений в схеме БД (например, после git pull)

```bash
$ yarn migrate:dev
```

### Внесение изменений в БД

Для изменения схемы БД нужно внести изменения в файл `./prisma/schema.prisma`. После внесения изменений, выполните
команду
```bash
$ yarn prisma:db:push
```
Данная команда перенесет изменения из `schema.prisma` в БД и сгенерирует типы Typescript.
Вносите изменения в `schema.prisma` и применяйте команду `yarn prisma:db:push` повторно, пока не будут внесены все
необходимые изменения. После тестирования кода с новой схемой выполните команду
```bash
$ yarn migrate:dev
```
для создания файла миграции и закоммите его.

### Просмотр данных в БД

Для просмотра данных в БД без установки дополнительного ПО используйте команду
```bash
$ yarn prisma:studio
```
